+++
title = "rqalpha-mod-xtrade"
author = ["Jimmy.m.Gong"]
description = "rqalpha-mod-xtrade 是 Linux 环境下中国股票市场的交易借口."
tags = ["量化交易", "ricequant"]
categories = ["quant"]
draft = false
creator = "Emacs 26.1 (Org mode 9.1.13 + ox-hugo)"
+++

## Prologue {#prologue}

-   rqalpha-mod-xtrade 是 Linux 环境下中国股票市场的交易借口.
-   封装成 [rqalpha](https://github.com/ricequant/rqalpha.git)-mod.
-   支持命令行模式.
-   支持代码中策略实盘模式.
-   无金额大小限制, 1个亿也能玩. 10000000000000000000000000000000


## 实例 {#实例}

{{< figure src="https://asciinema.org/a/191131.png" link="https://asciinema.org/a/191131?speed=3&theme=solarized-dark&autoplay=1&loop=1" >}}


## 系统信息 {#系统信息}

<a id="org3464ef6"></a>
```sh
uname -op
```

```text
x86_64 GNU/Linux
```


## 帮助 {#帮助}

<a id="org318f8e0"></a>
```sh
rqalpha xtrade -h
```

```text
auth success
Usage: rqalpha xtrade [OPTIONS] CMD [PARAMS]...

  Linux command `xtrade` for rqalpha Mod

  rqalpha xtrade setup

  rqalpha xtrade teardown

  rqalpha xtrade buy code price quant priceType

  rqalpha xtrade sell code price quant priceType

  rqalpha xtrade cancel type orderId

  rqalpha xtrade ipo

  rqalpha xtrade orders type symbol

  rqalpha xtrade positions

  rqalpha xtrade balance

  rqalpha xtrade account

  rqalpha xtrade statuses

Options:
  -h, --help  Show this message and exit.
```


## 买入 {#买入}

<a id="org9b30bfd"></a>
```sh
rqalpha xtrade buy 000001 8.98 100 p
```

```text
auth success
成交明细:
| 成交时间   | 证券代码   | 证券名称   | 操作   | 成交数量   | 成交均价   | 成交金额   | 合同编号   | 成交编号   | 撤单数量   | 股票余额   |
|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|------------|

委托明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   |   股东帐户 | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  0 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 买入   | 08:44:57   |   20180711 |  917943812 | 深圳Ａ股   | 0084053965 | 限价       |

仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       3800 |        500 | 1439.8  |    8.645 |        3.87 |   8.98 |  38614 | 深圳Ａ股   | 0084053965 |       4300 |         3800 |
|  1 |     300001 | 特锐德     |       3800 |       3800 |          0 | 1058.72 |   11.651 |        2.39 |  11.93 |  45334 | 深圳Ａ股   | 0084053965 |       3800 |         3800 |
|  2 |     600000 | 浦发银行   |       5000 |       4600 |        400 | 1487.59 |    9.272 |        3.21 |   9.57 |  47850 | 上海Ａ股   | A459774088 |       5000 |         4600 |
```


## 卖出 {#卖出}

<a id="orga459366"></a>
```sh
rqalpha xtrade sell 000001 8.98 100 p
```

```text
auth success
成交明细:
| 成交时间   | 证券代码   | 证券名称   | 操作   | 成交数量   | 成交均价   | 成交金额   | 合同编号   | 成交编号   | 撤单数量   | 股票余额   |
|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|------------|

委托明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   |   股东帐户 | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  0 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 买入   | 08:44:57   |   20180711 |  917943812 | 深圳Ａ股   | 0084053965 | 限价       |
|  1 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 卖出   | 08:45:45   |   20180711 |  918348255 | 深圳Ａ股   | 0084053965 | 限价       |

仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       4200 |        100 | 1439.8  |    8.645 |        3.87 |   8.98 |  38614 | 深圳Ａ股   | 0084053965 |       4300 |         4200 |
|  1 |     300001 | 特锐德     |       3800 |       3800 |          0 | 1058.72 |   11.651 |        2.39 |  11.93 |  45334 | 深圳Ａ股   | 0084053965 |       3800 |         3800 |
|  2 |     600000 | 浦发银行   |       5000 |       5000 |          0 | 1487.59 |    9.272 |        3.21 |   9.57 |  47850 | 上海Ａ股   | A459774088 |       5000 |         5000 |
```


## 撤单 {#撤单}


### 撤指定买单 {#撤指定买单}

<a id="org79f27d5"></a>
```sh
rqalpha xtrade cancel b 000001 p
```

```text
auth success
撤单前委托明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   |   股东帐户 | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  0 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 卖出   | 08:45:45   |   20180711 |  918348255 | 深圳Ａ股   | 0084053965 | 限价       |
|  1 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 买入   | 08:51:38   |   20180711 |  918352642 | 深圳Ａ股   | 0084053965 | 限价       |

撤单后委托明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   |   股东帐户 | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  0 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 卖出   | 08:45:45   |   20180711 |  918348255 | 深圳Ａ股   | 0084053965 | 限价       |

仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       4200 |        100 | 1439.8  |    8.645 |        3.87 |   8.98 |  38614 | 深圳Ａ股   | 0084053965 |       4300 |         4200 |
|  1 |     300001 | 特锐德     |       3800 |       3800 |          0 | 1058.72 |   11.651 |        2.39 |  11.93 |  45334 | 深圳Ａ股   | 0084053965 |       3800 |         3800 |
|  2 |     600000 | 浦发银行   |       5000 |       5000 |          0 | 1487.59 |    9.272 |        3.21 |   9.57 |  47850 | 上海Ａ股   | A459774088 |       5000 |         5000 |
```


### 撤指定卖单 {#撤指定卖单}

<a id="org7869a9f"></a>
```sh
rqalpha xtrade cancel s 000001 p
```

```text
auth success
撤单前委托明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   |   股东帐户 | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  0 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 卖出   | 08:45:45   |   20180711 |  918348255 | 深圳Ａ股   | 0084053965 | 限价       |

撤单后委托明细:
| 证券代码   | 证券名称   | 备注   | 委托数量   | 成交数量   | 委托价格   | 成交均价   | 操作   | 委托时间   | 委托日期   | 合同编号   | 交易市场   | 股东帐户   | 订单类型   |
|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|

仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       4200 |        100 | 1439.8  |    8.645 |        3.87 |   8.98 |  38614 | 深圳Ａ股   | 0084053965 |       4300 |         4200 |
|  1 |     300001 | 特锐德     |       3800 |       3800 |          0 | 1058.72 |   11.651 |        2.39 |  11.93 |  45334 | 深圳Ａ股   | 0084053965 |       3800 |         3800 |
|  2 |     600000 | 浦发银行   |       5000 |       5000 |          0 | 1487.59 |    9.272 |        3.21 |   9.57 |  47850 | 上海Ａ股   | A459774088 |       5000 |         5000 |
```


### 撤指定买&卖单 {#撤指定买-and-卖单}

<a id="org88abda0"></a>
```sh
rqalpha xtrade cancel a 000001 p
```

```text
auth success
撤单前委托明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   |   股东帐户 | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  0 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 买入   | 08:53:20   |   20180711 |  917948457 | 深圳Ａ股   | 0084053965 | 限价       |
|  1 |     000001 | 平安银行   | 未成交 |        100 |          0 |       8.98 |          0 | 卖出   | 08:53:20   |   20180711 |  918352119 | 深圳Ａ股   | 0084053965 | 限价       |

撤单后委托明细:
| 证券代码   | 证券名称   | 备注   | 委托数量   | 成交数量   | 委托价格   | 成交均价   | 操作   | 委托时间   | 委托日期   | 合同编号   | 交易市场   | 股东帐户   | 订单类型   |
|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|

仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       4200 |        100 | 1439.8  |    8.645 |        3.87 |   8.98 |  38614 | 深圳Ａ股   | 0084053965 |       4300 |         4200 |
|  1 |     300001 | 特锐德     |       3800 |       3800 |          0 | 1058.72 |   11.651 |        2.39 |  11.93 |  45334 | 深圳Ａ股   | 0084053965 |       3800 |         3800 |
|  2 |     600000 | 浦发银行   |       5000 |       5000 |          0 | 1487.59 |    9.272 |        3.21 |   9.57 |  47850 | 上海Ａ股   | A459774088 |       5000 |         5000 |
```


## IPO 打新股 {#ipo-打新股}

<a id="org56840b1"></a>
```sh
rqalpha xtrade ipo r
```

```text
auth success
  新股申购:
  |   | 新股名称 | 新股代码 | 交易所名称 | 申购日期 | 发行价格 | 申购上限 | 最小交易股数 | 可申额度 |
  |---|----------|----------|------------|----------|----------|----------|--------------|----------|
  | 0 | 长飞申购 |   780869 | 上海Ａ股   | 20180710 |    26.71 |    22000 |         1000 |     1000 |

  | 委托日期   | 委托时间   | 证券代码   | 证券名称   | 操作   | 委托价格   | 委托数量   | 成交均价   | 成交数量   | 订单类型   | 合同编号   | 备注   | 股东帐户   | 交易市场   |
  |------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|--------|------------|------------|
```


## 账户查询 {#账户查询}

<a id="orge91b553"></a>
```sh
rqalpha xtrade account p
```

```text
auth success
账户: 33198914
```


## 余额查询 {#余额查询}

<a id="org2b724db"></a>
```sh
rqalpha xtrade balance p
```

```text
auth success
余额: 72189.12
```


## 仓位明细 {#仓位明细}

<a id="orgd549795"></a>
```sh
rqalpha xtrade positions p
```

```text
auth success
仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       4200 |        100 | 1439.8  |    8.645 |        3.87 |   8.98 |  38614 | 深圳Ａ股   | 0084053965 |       4300 |         4200 |
|  1 |     300001 | 特锐德     |       3800 |       3800 |          0 | 1058.72 |   11.651 |        2.39 |  11.93 |  45334 | 深圳Ａ股   | 0084053965 |       3800 |         3800 |
|  2 |     600000 | 浦发银行   |       5000 |       5000 |          0 | 1487.59 |    9.272 |        3.21 |   9.57 |  47850 | 上海Ａ股   | A459774088 |       5000 |         5000 |
```


## 订单查询 {#订单查询}


## 指定委托单 {#指定委托单}

<a id="orgcf0994a"></a>
```sh
rqalpha xtrade orders e 600000 p
```

```text
auth success
订单明细:
|    |   证券代码 | 证券名称   | 备注   |   委托数量 |   成交数量 |   委托价格 |   成交均价 | 操作   | 委托时间   |   委托日期 |   合同编号 | 交易市场   | 股东帐户   | 订单类型   |
|----|------------|------------|--------|------------|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|
|  1 |     600000 | 浦发银行   | 未成交 |        100 |          0 |       9.3  |          0 | 买入   | 10:55:20   |   20180711 |  918544074 | 上海Ａ股   | A459774088 | 限价       |
|  4 |     600000 | 浦发银行   | 未成交 |        100 |          0 |       9.49 |          0 | 卖出   | 10:56:12   |   20180711 |  918554161 | 上海Ａ股   | A459774088 | 限价       |
|  6 |     600000 | 浦发银行   | 未成交 |        100 |          0 |       9.3  |          0 | 买入   | 10:55:53   |   20180711 |  918555849 | 上海Ａ股   | A459774088 | 限价       |
仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       3890 |        410 |  538.24 |    8.645 |        1.45 |   8.77 |  37711 | 深圳Ａ股   | 0084053965 |       4300 |         4290 |
|  1 |     300001 | 特锐德     |       4200 |       3600 |        600 | 2689.82 |   11.71  |        5.47 |  12.35 |  51870 | 深圳Ａ股   | 0084053965 |       4200 |         4000 |
|  2 |     600000 | 浦发银行   |       5100 |       4600 |        500 |  476.49 |    9.277 |        1.01 |   9.37 |  47787 | 上海Ａ股   | A459774088 |       5100 |         5000 |
```


## 指定成交单 {#指定成交单}

<a id="orgc02dac1"></a>
```sh
rqalpha xtrade orders d 600000 p
```

```text
auth success
订单明细:
|    | 成交时间   |   证券代码 | 证券名称   | 操作   |   成交数量 |   成交均价 |   成交金额 |   合同编号 |   成交编号 |   撤单数量 |   股票余额 |
|----|------------|------------|------------|--------|------------|------------|------------|------------|------------|------------|------------|
|  4 | 10:31:38   |     600000 | 浦发银行   | 买入   |        100 |       9.39 |        939 |  918527503 | 2409546621 |          0 |       5100 |
|  5 | 10:31:59   |     600000 | 浦发银行   | 买入   |        100 |       9.39 |        939 |  918522086 | 2409547814 |          0 |       5200 |
|  8 | 10:33:50   |     600000 | 浦发银行   | 卖出   |        100 |       9.39 |        939 |  918531055 | 2409553655 |          0 |       5100 |
|  9 | 10:34:11   |     600000 | 浦发银行   | 卖出   |        100 |       9.39 |        939 |  918529558 | 2409554747 |          0 |       5000 |
| 10 | 10:34:29   |     600000 | 浦发银行   | 卖出   |        100 |       9.39 |        939 |  918520188 | 2409555623 |          0 |       4900 |
| 12 | 10:36:48   |     600000 | 浦发银行   | 买入   |        100 |       9.39 |        939 |  918530719 | 2409562338 |          0 |       5000 |
仓位明细:
|    |   证券代码 | 证券名称   |   股票余额 |   可用余额 |   冻结数量 |    盈亏 |   成本价 |   盈亏比(%) |   市价 |   市值 | 交易市场   | 股东帐户   |   实际数量 |   可申赎数量 |
|----|------------|------------|------------|------------|------------|---------|----------|-------------|--------|--------|------------|------------|------------|--------------|
|  0 |     000001 | 平安银行   |       4300 |       3890 |        410 |  538.24 |    8.645 |        1.45 |   8.77 |  37711 | 深圳Ａ股   | 0084053965 |       4300 |         4290 |
|  1 |     300001 | 特锐德     |       4200 |       3600 |        600 | 2689.82 |   11.71  |        5.47 |  12.35 |  51870 | 深圳Ａ股   | 0084053965 |       4200 |         4000 |
|  2 |     600000 | 浦发银行   |       5100 |       4600 |        500 |  476.49 |    9.277 |        1.01 |   9.37 |  47787 | 上海Ａ股   | A459774088 |       5100 |         5000 |
```

[//]: # "Exported with love from a post written in Org mode"
[//]: # "- https://github.com/yssource/home"
